# Codebase Reference: Developer Scripts & Tooling

This document describes the key developer-oriented helper scripts. Together, they illustrate how developers can interact with the backend, run tests, and automate repetitive tasks during day-to-day work.

---

## Developer Helper Scripts

### 1. `scripts/dev_watch.py`
* **Purpose**  A small watchdog that runs two smoke tests (`quick_smoke.py`, `ui_smoke.py`) and then launches the Streamlit dashboard with hot-reload.
* **Highlights**
  * Monitors Python files for changes and restarts Streamlit automatically.
  * Tailors the dev loop so you see compile errors *before* the UI starts.

### 2. `scripts/quick_smoke.py`
* **Purpose**  A lightning-fast compile test: walks the repo, imports every Python file, and fails if any raise `SyntaxError`/`ImportError`.
* **Highlights**
  * Ensures commits don't break basic importability.
  * Runs in <1 s, ideal for pre-commit hooks.

### 3. `scripts/ui_smoke.py`
* **Purpose**  A headless UI test (Playwright) that opens each Streamlit page, scans for "Traceback" or `.stException`, and reports failures.
* **Highlights**
  * Guards against runtime errors in the dashboard after code changes.
  * Integrated into `dev_watch.py` so the UI only launches if this passes.

### 4. `scripts/scaffold_sweeps.py`
* **Purpose**  Auto-generates YAML sweep skeletons for every discovered controller.
* **Highlights**
  * Walks `bots/controllers/`, introspects each config class, and writes a stub under `sweeps/generated/`.
  * Saves time when adding new strategies by providing ready-made sweep templates.

### 5. `multi_market_sweep_tester.py` (repo root)
* **Purpose**  Batch-runs **every** market-making sweep file in parallel, aggregating results into one master CSV.
* **Highlights**
  * Discovers `*_sweep.yml` files, expands each via `grid_builder`, and feeds payloads into `batch_tester` logic.
  * Perfect for nightly regression of all market-making strategies across parameter grids.

### 6. `scripts/lint_sweeps.py`
*   **Purpose**: A command-line utility for validating parameter sweep configuration files (`*_sweep.yml`).
*   **Key Features**:
    *   Checks if the YAML syntax is valid.
    *   Uses the logic from `grid_builder.py` to ensure that the Cartesian product of the grid parameters can be generated without errors.
    *   Provides clear "PASS" or "FAIL" feedback for each file.
*   **Usage**: Essential for CI/CD pipelines and local development to catch configuration errors early.

---

## Testing Pipeline Scripts

These scripts act as wrappers for the core testing tools, providing a clear, numbered sequence for running a full parameter sweep from start to finish.

### 7. `01_yml_to_json.py`
*   **Purpose**: The first step in the testing pipeline. It converts a YAML sweep file (e.g., `dman_v3_sweep.yml`) into a JSON list of configuration payloads.
*   **Mechanism**: It's a lightweight command-line wrapper that calls the underlying logic from `grid_builder.py`.

### 8. `02_json_to_backtests.py`
*   **Purpose**: The second step, which takes the JSON payload file generated by the previous script and executes the backtests.
*   **Mechanism**: A simple wrapper that calls the core logic from `batch_tester.py` to run the tests in parallel and save the results.

### 9. `03_multi_yml_to_backtests.py`
*   **Purpose**: An orchestrator script that combines steps 1 and 2. It automatically finds all `*_sweep.yml` files in a directory, converts them to JSON, and runs the backtests.
*   **Mechanism**: It wraps the functionality of `multi_market_sweep_tester.py` to provide a single command for running all sweeps.

---

These scripts illustrate how sweeps are scaffolded and executed, and how developers maintain a tight feedback loop during daily work. 